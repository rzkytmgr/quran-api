import { z } from 'zod';
import fs from 'node:fs';
import path from 'node:path';
import { logger } from '../libraries/logger/_logger.js';
import { constants } from '../utils/constants/_constants.js';
import { getEntireRecitersService } from '../services/reciter.services.js';
const dependencies = async (req, response, next) => {
  if (!constants.META_AVAILABLE_LANGUAGE.length) {
    constants.META_AVAILABLE_LANGUAGE = fs.readdirSync(path.resolve('src', 'db', '_translation', 'lang'));
  }
  if (!constants.META_RECITER_LIST.length) {
    const getEntireReciters = await getEntireRecitersService();
    constants.META_RECITER_LIST = getEntireReciters.map((value) => value.id);
  }
  const dependenciesExtra = {
    logger,
    constants,
    validator: z,
  };
  req.ext = dependenciesExtra;
  next();
};
export { dependencies };
// # sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwZW5kZW5jaWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21pZGRsZXdhcmVzL2RlcGVuZGVuY2llcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sS0FBSyxDQUFDO0FBQ3hCLE9BQU8sRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUN6QixPQUFPLElBQUksTUFBTSxXQUFXLENBQUM7QUFDN0IsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQU9yRSxNQUFNLFlBQVksR0FBRyxLQUFLLEVBQUUsR0FBWSxFQUFFLFFBQWtCLEVBQUUsSUFBa0IsRUFBRSxFQUFFO0lBQ2xGLElBQUksQ0FBQyxTQUFTLENBQUMsdUJBQXVCLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDOUMsU0FBUyxDQUFDLHVCQUF1QixHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3hHLENBQUM7SUFFRCxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hDLE1BQU0saUJBQWlCLEdBQUcsTUFBTSx3QkFBd0IsRUFBRSxDQUFDO1FBQzNELFNBQVMsQ0FBQyxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMzRSxDQUFDO0lBRUQsTUFBTSxpQkFBaUIsR0FBRztRQUN4QixNQUFNO1FBQ04sU0FBUztRQUNULFNBQVMsRUFBRSxDQUFDO0tBQ2IsQ0FBQztJQUVGLEdBQUcsQ0FBQyxHQUFHLEdBQUcsaUJBQWlCLENBQUM7SUFDNUIsSUFBSSxFQUFFLENBQUM7QUFDVCxDQUFDLENBQUM7QUFFRixPQUFPLEVBQUUsWUFBWSxFQUFFLENBQUMifQ==
